<!--- GENERATED BY gomplate from scripts/docs/top-config.md.tmpl --->
# Agent Configuration

The agent is configured primarily by a YAML document conventionally located at
`/etc/signalfx/agent.yaml`.  The location of the config file can be specified
by the `-config` flag to the agent binary (`signalfx-agent`).

## Config Schema

| Config option | Default | Required | Type | Description |
| --- | --- | --- | --- | --- |
| `signalFxAccessToken` |  | **yes** | `string` | The access token for the org that should receive the metrics emitted by the agent. |
| `ingestUrl` | `"https://ingest.signalfx.com"` | no | `string` | The URL of SignalFx ingest server.  Can be overridden if using the Metric Proxy. |
| `apiUrl` | `"https://api.signalfx.com"` | no | `string` | The SignalFx API base URL |
| `hostname` |  | no | `string` | The hostname that will be reported. If blank, this will be auto-determined by the agent based on a reverse lookup of the machine's IP address |
| `intervalSeconds` | `10` | no | `integer` | How often to send metrics to SignalFx.  Monitors can override this individually. |
| `globalDimensions` | `{}` | no | `map of string` | Dimensions that will be added to every datapoint emitted by the agent |
| `sendMachineID` | `false` | no | `bool` | Whether to send the machine-id dimension on all host-specific datapoints generated by the agent.  This dimension is derived from the Linux machine-id value. |
| `observers` | `[]` | no | [`list of object (see below)`](#observers) | A list of observers to use (see observer config) |
| `monitors` | `[]` | no | [`list of object (see below)`](#monitors) | A list of monitors to use (see monitor config) |
| `writer` | `{}` | no | [`object (see below)`](#writer) | Configuration of the datapoint/event writer |
| `logging` | `{}` | no | [`object (see below)`](#logging) | Log configuration |
| `collectd` | `{}` | no | [`object (see below)`](#collectd) | Configuration of the managed collectd subprocess |
| `metricsToExclude` | `[]` | no | [`list of object (see below)`](#metricstoexclude) | A list of metric filters |
| `pythonEnabled` | `false` | no | `bool` |  |
| `diagnosticsSocketPath` | `"/var/run/signalfx-agent/diagnostics.sock"` | no | `string` | The path where the agent will create its diagnostic output UNIX socket |
| `internalMetricsSocketPath` | `"/var/run/signalfx-agent/internal-metrics.sock"` | no | `string` | The path where the agent will create a socket that serves internal metrics (used by the internal-metrics monitor) |
| `profiling` | `false` | no | `bool` | Enables Go pprof endpoint on port 6060 that serves profiling data for development |
| `bundleDir` |  | no | `string` | Path to the directory holding the agent dependencies.  This will normally be derived automatically. Overrides the envvar SIGNALFX_BUNDLE_DIR if set. |
| `scratch` |  | no | `interface` | This exists purely to give the user a place to put common yaml values to reference in other parts of the config file. |
| `configSources` |  | no | `interface` | Sources is used by the dynamic value renderer at an earlier stage of config file processing and so is not needed here. |


## observers
The **nested** `observers` config object has the following fields:

For more information on observer configuration, see [Observer Config](./observer-config.md).


| Config option | Default | Required | Type | Description |
| --- | --- | --- | --- | --- |
| `type` |  | no | `string` | The type of the observer |


## monitors
The **nested** `monitors` config object has the following fields:

For more information on monitor configuration, see [Monitor Config](./monitor-config.md).


| Config option | Default | Required | Type | Description |
| --- | --- | --- | --- | --- |
| `type` |  | no | `string` | The type of the monitor |
| `discoveryRule` |  | no | `string` | The rule used to match up this configuration with a discovered endpoint. If blank, the configuration will be run immediately when the agent is started.  If multiple endpoints match this rule, multiple instances of the monitor type will be created with the same configuration. |
| `extraDimensions` |  | no | `map of string` | A set of extra dimensions to include on datapoints emitted by the monitor(s) created from this configuration |
| `intervalSeconds` | `0` | no | `integer` | The interval (in seconds) at which to emit datapoints from the monitor(s) created by this configuration.  If not set (or set to 0), the global agent intervalSeconds config option will be used instead. |
| `solo` | `false` | no | `bool` | If one or more configurations have this set to true, only those configurations will be considered -- useful for testing |


## writer
The **nested** `writer` config object has the following fields:


| Config option | Default | Required | Type | Description |
| --- | --- | --- | --- | --- |
| `datapointBufferCapacity` | `1000` | no | `unsigned integer` | These are soft limits and affect how much memory will be initially allocated for datapoints, not the maximum memory allowed. Both capacity options get applied at startup and subsequent changes require an agent restart. |
| `eventBufferCapacity` | `1000` | no | `unsigned integer` |  |
| `datapointSendIntervalSeconds` | `5` | no | `integer` |  |
| `eventSendIntervalSeconds` | `5` | no | `integer` |  |
| `logDatapoints` | `false` | no | `bool` |  |
| `logEvents` | `false` | no | `bool` |  |


## logging
The **nested** `logging` config object has the following fields:


| Config option | Default | Required | Type | Description |
| --- | --- | --- | --- | --- |
| `level` | `info` | no | `string` |  |


## collectd
The **nested** `collectd` config object has the following fields:


| Config option | Default | Required | Type | Description |
| --- | --- | --- | --- | --- |
| `disableCollectd` | `false` | no | `bool` | If you won't be using any collectd monitors, this can be set to true to prevent collectd from pre-initializing |
| `timeout` | `40` | no | `integer` | How many read intervals before abandoning a metrics. Doesn't affect much in normal usage. See https://collectd.org/documentation/manpages/collectd.conf.5.shtml#timeout_iterations. |
| `readThreads` | `5` | no | `integer` | Number of threads dedicated to executing read callbacks. See https://collectd.org/documentation/manpages/collectd.conf.5.shtml#readthreads_num. |
| `writeQueueLimitHigh` | `500000` | no | `integer` | The maximum numbers of values in the queue to be written back to the agent from collectd.  Since the values are written to a local socket that the agent exposes, there should be almost no queuing and the default should be more than sufficient. See https://collectd.org/documentation/manpages/collectd.conf.5.shtml#writequeuelimithigh_highnum |
| `writeQueueLimitLow` | `400000` | no | `integer` | The lowest number of values in the collectd queue before which metrics begin being randomly dropped.  See https://collectd.org/documentation/manpages/collectd.conf.5.shtml#writequeuelimitlow_lownum |
| `logLevel` | `notice` | no | `string` | Collectd's log level -- info, notice, warning, or err |
| `intervalSeconds` | `0` | no | `integer` | A default read interval for collectd plugins.  If zero or undefined, will default to the global agent interval.  Some collectd python monitors do not support overridding the interval at the monitor level, but this setting will apply to them. |
| `writeServerIPAddr` | `127.9.8.7` | no | `string` | The local IP address of the server that the agent exposes to which collectd will send metrics.  This defaults to an arbitrary address in the localhost subnet, but can be overridden if needed. |
| `writeServerPort` | `0` | no | `integer` | The port of the agent's collectd metric sink server.  If set to zero (the default) it will allow the OS to assign it a free port. |
| `configDir` | `/var/run/signalfx-agent/collectd` | no | `string` | This is where the agent will write the collectd config files that it manages.  If you have secrets in those files, consider setting this to a path on a tmpfs mount.  The files in this directory should be considered transient -- there is no value in editing them by hand.  If you want to add your own collectd config, see the collectd/custom monitor. |


## metricsToExclude
The **nested** `metricsToExclude` config object has the following fields:


| Config option | Default | Required | Type | Description |
| --- | --- | --- | --- | --- |
| `dimensions` | `map[]` | no | `map of string` |  |
| `metricNames` |  | no | `list of string` |  |
| `metricName` |  | no | `string` |  |
| `monitorType` |  | no | `string` |  |
| `negated` | `false` | no | `bool` |  |



