<LoadPlugin "mysql">
  Interval {{.C.IntervalSeconds}}
</LoadPlugin>
<Plugin mysql>
  {{range $endpoint := .Endpoints}}
  {{range $db := $.C.Databases}}
  <Database "{{withDefault $endpoint.Name $endpoint.ID}}_{{$db.Name}}[{{encodeDimsForPluginInstance $.C.ExtraDimensions $endpoint.Dimensions}}]">
    ReportHost {{$.C.ReportHost}}
    Host "{{$endpoint.Host}}"
    Port {{$endpoint.Port}}
    Database "{{$db.Name}}"
    User "{{$.C.Username}}"
    {{with $.C.Password -}}
    Password "{{.}}"
    {{- end}}
  </Database>
  {{end}}
  {{end}}
</Plugin>
